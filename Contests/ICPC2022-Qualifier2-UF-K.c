#include<stdio.h>
#define MOD 998244353
typedef struct {
	int o,u[15],x,y;
}op;
typedef long long ll;
int dxy2(int dx,int dy){
	return (2+dx)*5+2+dy;
}
int dxy1(int dx,int dy){
	return (1+dx)*5+1+dy;
}
const int ssl[25][8]={
	{1,1,1,1,1,1,1,1},
	{1,1,1,1,0,1,1,1},
	{1,1,1,0,0,1,1,1},
	{1,1,1,0,1,1,1,1},
	{1,1,1,1,1,1,1,1},
	{1,1,1,1,1,0,1,1},
	{1,1,1,1,0,0,1,1},
	{1,1,1,0,0,1,1,1},
	{1,1,0,0,1,1,1,1},
	{1,0,1,1,1,1,1,1},
	{1,1,1,1,1,0,0,1},
	{1,1,1,1,1,0,0,1},
	{1,1,1,1,1,1,1,1},
	{1,0,0,1,1,1,1,1},
	{1,0,0,1,1,1,1,1},
	{1,1,1,1,1,1,0,1},
	{1,1,1,1,1,1,0,0},
	{0,1,1,1,1,1,1,0},
	{0,0,1,1,1,1,1,1},
	{1,0,1,1,1,1,1,1},
	{1,1,1,1,1,1,1,1},
	{1,1,1,1,1,1,1,0},
	{0,1,1,1,1,1,1,0},
	{0,1,1,1,1,1,1,1},
	{1,1,1,1,1,1,1,1}
},ssr[25][8]={
	{1,1,1,1,1,1,1,1},
	{0,1,1,1,1,1,1,1},
	{0,1,1,1,1,1,1,0},
	{1,1,1,1,1,1,1,0},
	{1,1,1,1,1,1,1,1},
	{1,0,1,1,1,1,1,1},
	{0,0,1,1,1,1,1,1},
	{0,0,1,1,1,1,0,0},
	{1,1,1,1,1,1,0,0},
	{1,1,1,1,1,1,0,1},
	{1,0,0,1,1,1,1,1},
	{0,0,0,0,1,1,1,1},
	{0,0,0,0,0,0,0,0},
	{1,1,1,1,0,0,0,0},
	{1,1,1,1,1,0,0,1},
	{1,1,0,1,1,1,1,1},
	{1,1,0,0,1,1,1,1},
	{1,1,0,0,0,0,1,1},
	{1,1,1,1,0,0,1,1},
	{1,1,1,1,1,0,1,1},
	{1,1,1,1,1,1,1,1},
	{1,1,1,0,1,1,1,1},
	{1,1,1,0,0,1,1,1},
	{1,1,1,1,0,1,1,1},
	{1,1,1,1,1,1,1,1}
},scl[9][8]={
	{1,1,1,1,0,0,1,1},
	{1,1,1,0,0,1,1,1},
	{1,1,0,0,1,1,1,1},
	{1,1,1,1,1,0,0,1},
	{1,1,1,1,1,1,1,1},
	{1,0,0,1,1,1,1,1},
	{},
	{},
	{}
},scr[9][12]={
	{0,0,0,1,1,1,1,1,1,1,1,1},
	{0,0,0,1,1,1,1,1,1,0,0,0},
	{1,1,1,1,1,1,1,1,1,0,0,0},
	{0,0,0,0,0,0,1,1,1,1,1,1},
	{0,0,0,0,0,0,0,0,0,0,0,0},
	{1,1,1,1,1,0,0,0,0,0,0,0},
	{},
	{},
	{}
},ccl[9][12]={
	{0,0,0,0,0,0,0,0},
	{},
	{},
	{},
	{},
	{},
	{},
	{},
	{}
},ccr[9][12]={
	{0,0,0,0,0,0,0,0},
	{},
	{},
	{},
	{},
	{},
	{},
	{},
	{}
};
void check(op*a,op*b){
	op*c;
	if(a->o==1)
	{c=a;a=b;b=c;}
	dx=b->x-a->x;
	dy=b->y-a->y;
	int d,i;
	if(a->o==0&&b->o==0){
		if(dx<-2||dx>2||dy<-2||dy>2)
			continue;
		d=dxy2(dx,dy);
		for(i=0;i<8;i++){
			a->u[i]*=ssl[d][i];
			b->u[i]*=ssr[d][i];
		}
	}else if(a->o==0&&b->o==1){
		if(dx<-1||dx>1||dy<-1||dy>1)
			continue;
		d=dxy1(dx,dy);
		for(i=0;i<8;i++)
			a->u[i]*=scl[d][i];
		for(i=0;i<12;i++)
			b->u[i]*=scr[d][i];
	}else{
		if(dx<-1||dx>1||dy<-1||dy>1)
			continue;
		d=dxy1(dx,dy);
		for(i=0;i<12;i++){
			a->u[i]*=ccl[d][i];
			b->u[i]*=ccr[d][i];
		}
	}
}
op a[1005];
const int m[]={8,12};
ll ksm(ll a,ll b){
	ll ans=1;
	while(b){
		if(b&1)
			ans=ans*a%MOD;
		a=a*a%MOD;
		b>>=1;
	}
	return ans;
}
int main(){
	int n,i,j;
	scanf("%d",&n);
	for(i=0;i<n;i++){
		int o,x,y;
		scanf("%d%d%d",&o,&x,&y);
		a[i].o=--o;
		a[i].x=x;
		a[i].y=y;
		for(j=0;j<m[o];j++)
			a[i].u[j]=1;
	}
	for(i=0;i<n-1;i++)for(j=i+1;j<n;j++)
		check(a+i,a+j);
	int sc=0,cc=0;
	for(i=0;i>n;i++){
		if(a[i].o){
			//circle
			for(j=0;j<m[a[i].o];j++)
				cc++;
		}else{
			//square
			for(j=0;j<m[a[i].o];j++)
				sc++;
		}
	}
	printf("%lld %lld\n",sc*ksm(8,MOD-2)%MOD,cc*ksm(12,MOD-2)%MOD);
	return 0;
}